{"version":3,"file":"formbuilder-conditional-logic.umd.cjs","sources":["../src/plugin/builder.ts","../src/renderer/setup.ts"],"sourcesContent":["/**\n * Builder-side plugin helpers for formBuilder.\n * Adds:\n *  - typeUserAttrs for logic JSON, applyTo, logicGroup\n *  - onOpenFieldEdit panel that groups these controls\n *  - Visual Rules Editor (optional) that populates the logic JSON without typing\n */\n\ntype UserAttrs = Record<string, any>;\n\nexport interface FieldMeta {\n    name: string;\n    type: string;\n    label?: string;\n    values?: Array<{ label: string; value: string }>;\n}\n\nexport interface BuilderInitOptions {\n    panelTitle?: string;\n    types?: string[];\n    // Hooks to supply fields/values (generic); if omitted, we try to infer from builder JSON.\n    getAvailableFields?: () => FieldMeta[];\n    getFieldValues?: (fieldName: string) => Array<{ label: string; value: string }> | null;\n    enableVisualEditor?: boolean; // default true\n}\n\nconst DEFAULT_TYPES = [\n    'text', 'textarea', 'number', 'select',\n    'radio-group', 'checkbox-group',\n    'date', 'paragraph', 'header', 'file', 'autocomplete'\n];\n\nexport function withConditionalLogic(opts: BuilderInitOptions = {}) {\n    const panelTitle = opts.panelTitle || 'Conditional Logic';\n    const types = (opts.types && opts.types.length ? opts.types : DEFAULT_TYPES);\n    const enableVE = opts.enableVisualEditor !== false;\n\n    const typeUserAttrs: Record<string, UserAttrs> = {};\n    types.forEach(t => {\n        typeUserAttrs[t] = {\n            logic: {\n                label: `${panelTitle} (JSON)`,\n                type: 'textarea',\n                value: '',\n                placeholder: '{ \"groups\":[...], \"actions\":[\"show\"] }'\n            },\n            logicApplyTo: {\n                label: `${panelTitle}: Apply To`,\n                type: 'select',\n                value: 'self',\n                options: {\n                    self: 'This Field',\n                    container: 'Field Container',\n                    group: 'Logic Group (below)'\n                }\n            },\n            logicGroup: {\n                label: `${panelTitle}: Group ID`,\n                type: 'text',\n                value: '',\n                placeholder: 'e.g., vehicleDetails'\n            }\n        };\n    });\n\n    function inferFieldsFromBuilderJson(): FieldMeta[] {\n        try {\n            // formBuilder exposes the active instance via jQuery selection; we can sniff current JSON if needed.\n            const stage = (window as any).jQuery?.('.build-wrap');\n            const inst = stage?.data('formBuilder');\n            const json = inst?.actions?.getData?.('json');\n            const arr = typeof json === 'string' ? JSON.parse(json) : Array.isArray(json) ? json : [];\n            return arr.filter((f: any) => f?.name).map((f: any) => ({\n                name: f.name,\n                type: f.type,\n                label: f.label,\n                values: Array.isArray(f.values) ? f.values.map((v: any) => ({ label: v.label ?? v.value, value: v.value })) : undefined\n            }));\n        } catch { return []; }\n    }\n\n    function getFields(): FieldMeta[] {\n        try {\n            const custom = opts.getAvailableFields?.();\n            if (custom && custom.length) return custom;\n        } catch { }\n        return inferFieldsFromBuilderJson();\n    }\n\n    function getValuesFor(fieldName: string): Array<{ label: string; value: string }> | null {\n        try {\n            const custom = opts.getFieldValues?.(fieldName);\n            if (custom) return custom;\n        } catch { }\n        const fm = getFields().find(f => f.name === fieldName);\n        return fm?.values ?? null;\n    }\n\n    function makeVE(\n        htmlParent: HTMLElement,\n        getTextArea: () => HTMLTextAreaElement,\n        getApplyTo: () => HTMLSelectElement,\n        getGroupId: () => HTMLInputElement\n    ) {\n        // outer wrapper\n        const ve = document.createElement('div');\n        ve.className = 'fb-logic-ve';\n        ve.style.marginBottom = '8px';\n\n        // header (outside the dashed border)\n        const hdr = document.createElement('div');\n        hdr.className = 'fb-logic-ve-header';\n        hdr.style.marginTop = '0px';\n        hdr.style.fontWeight = '600';\n        hdr.innerHTML = `Visual Rules Editor <span style=\"font-size:12px;opacity:.7;font-weight:400;\">(no JSON typing)</span>`;\n        ve.appendChild(hdr);\n\n        // bordered body\n        const veBody = document.createElement('div');\n        veBody.className = 'fb-logic-ve-body';\n        veBody.style.border = '1px dashed #cbd5e1';\n        veBody.style.padding = '8px';\n        veBody.style.marginTop = '6px';\n        ve.appendChild(veBody);\n\n        // ---- contents go inside veBody ----\n\n        // mode\n        const modeWrap = document.createElement('div');\n        modeWrap.style.margin = '6px 0';\n        modeWrap.innerHTML = `\n    <label style=\"margin-right:8px;\">Mode</label>\n    <select class=\"ve-mode form-select form-select-sm\" style=\"display:inline-block; width:auto;\">\n      <option value=\"any\">ANY (OR)</option>\n      <option value=\"all\">ALL (AND)</option>\n    </select>\n  `;\n        veBody.appendChild(modeWrap);\n\n        // actions\n        const actionsWrap = document.createElement('div');\n        actionsWrap.style.margin = '6px 0';\n        actionsWrap.innerHTML = `\n    <label style=\"margin-right:8px;\">Actions</label>\n    <label class=\"form-check form-check-inline\"><input class=\"form-check-input ve-act\" type=\"checkbox\" value=\"show\" checked> <span class=\"form-check-label\">show</span></label>\n    <label class=\"form-check form-check-inline\"><input class=\"form-check-input ve-act\" type=\"checkbox\" value=\"require\"> <span class=\"form-check-label\">require</span></label>\n    <label class=\"form-check form-check-inline\"><input class=\"form-check-input ve-act\" type=\"checkbox\" value=\"enable\"> <span class=\"form-check-label\">enable</span></label>\n    <label class=\"form-check form-check-inline\"><input class=\"form-check-input ve-act\" type=\"checkbox\" value=\"disable\"> <span class=\"form-check-label\">disable</span></label>\n    <label class=\"form-check form-check-inline\"><input class=\"form-check-input ve-act\" type=\"checkbox\" value=\"hide\"> <span class=\"form-check-label\">hide</span></label>\n  `;\n        veBody.appendChild(actionsWrap);\n\n        // rules container\n        const rules = document.createElement('div');\n        rules.className = 've-rules';\n        veBody.appendChild(rules);\n\n        const addBtn = document.createElement('button');\n        addBtn.type = 'button';\n        addBtn.className = 'btn btn-sm btn-outline-primary';\n        addBtn.textContent = 'Add rule';\n        addBtn.style.marginTop = '8px';\n        veBody.appendChild(addBtn);\n\n        function row(field?: string, op?: string, value?: string) {\n            const row = document.createElement('div');\n            row.className = 've-row';\n            row.style.display = 'grid';\n            row.style.gridTemplateColumns = '1fr 1fr 1fr auto';\n            row.style.gap = '6px';\n            row.style.marginTop = '6px';\n\n            // field select\n            const fSel = document.createElement('select');\n            fSel.className = 'form-select form-select-sm ve-field';\n            getFields().forEach(f => {\n                const opt = document.createElement('option');\n                opt.value = f.name;\n                opt.textContent = f.label ? `${f.label} (${f.name})` : f.name;\n                fSel.appendChild(opt);\n            });\n            if (field) fSel.value = field;\n\n            // operator select\n            const oSel = document.createElement('select');\n            oSel.className = 'form-select form-select-sm ve-op';\n\n            function setOpsForField(fn: string) {\n                const fm = getFields().find(f => f.name === fn);\n                const isNum = fm?.type === 'number';\n                const isChoice = fm?.type === 'radio-group' || fm?.type === 'select' || !!fm?.values?.length;\n                const ops = isNum\n                    ? ['equals', 'notEquals', 'gt', 'gte', 'lt', 'lte', 'isEmpty', 'notEmpty']\n                    : isChoice\n                        ? ['equals', 'notEquals', 'isEmpty', 'notEmpty']\n                        : ['equals', 'notEquals', 'contains', 'startsWith', 'endsWith', 'isEmpty', 'notEmpty'];\n                oSel.innerHTML = '';\n                ops.forEach(o => {\n                    const opt = document.createElement('option');\n                    opt.value = o;\n                    opt.textContent = o;\n                    oSel.appendChild(opt);\n                });\n            }\n\n            setOpsForField(fSel.value);\n            if (op) oSel.value = op;\n\n            // value control (select or input)\n            const vWrap = document.createElement('div');\n            vWrap.className = 've-value-wrap';\n\n            function renderValueControl(fn: string, current?: string) {\n                vWrap.innerHTML = '';\n                const choices = getValuesFor(fn);\n                if (choices && choices.length) {\n                    const s = document.createElement('select');\n                    s.className = 'form-select form-select-sm ve-value';\n                    choices.forEach(c => {\n                        const option = document.createElement('option');\n                        option.value = c.value;\n                        option.textContent = c.label ?? c.value;\n                        s.appendChild(option);\n                    });\n                    if (current) s.value = current;\n                    vWrap.appendChild(s);\n                } else {\n                    const i = document.createElement('input');\n                    i.type = 'text';\n                    i.className = 'form-control form-control-sm ve-value';\n                    if (current) i.value = current;\n                    vWrap.appendChild(i);\n                }\n            }\n\n            renderValueControl(fSel.value, value);\n\n            // remove btn\n            const rm = document.createElement('button');\n            rm.type = 'button';\n            rm.className = 'btn btn-sm btn-link text-danger';\n            rm.textContent = 'remove';\n\n            // interactions\n            fSel.addEventListener('change', () => {\n                setOpsForField(fSel.value);\n                renderValueControl(fSel.value);\n            });\n            rm.addEventListener('click', () => row.remove());\n\n            // mount\n            row.appendChild(fSel);\n            row.appendChild(oSel);\n            row.appendChild(vWrap);\n            row.appendChild(rm);\n            rules.appendChild(row);\n        }\n\n        addBtn.addEventListener('click', () => row());\n\n        // Save button\n        const save = document.createElement('button');\n        save.type = 'button';\n        save.className = 'btn btn-sm btn-primary';\n        save.textContent = 'Save to JSON';\n        save.style.marginTop = '8px';\n        save.style.marginLeft = '8px';\n        veBody.appendChild(save);\n\n        save.addEventListener('click', () => {\n            const _mode = (veBody.querySelector('.ve-mode') as HTMLSelectElement).value as 'any' | 'all';\n            const _actions = Array.from(veBody.querySelectorAll('.ve-act') as NodeListOf<HTMLInputElement>)\n                .filter(i => i.checked).map(i => i.value) as Array<'show' | 'hide' | 'enable' | 'disable' | 'require'>;\n            const ruleRows = Array.from(veBody.querySelectorAll('.ve-row'));\n            const rules = ruleRows.map(r => {\n                const f = (r.querySelector('.ve-field') as HTMLSelectElement).value;\n                const o = (r.querySelector('.ve-op') as HTMLSelectElement).value;\n                const valEl = (r.querySelector('.ve-value') as HTMLInputElement | HTMLSelectElement);\n                const v = (valEl as any).value ?? '';\n                return { field: f, op: o as any, value: v };\n            });\n            const cfg = { groups: [{ mode: _mode, rules, actions: _actions }] };\n            (getTextArea()).value = JSON.stringify(cfg, null, 2);\n            alert('Conditional Logic JSON updated.\\nTip: you can switch back to Visual to adjust again.');\n        });\n\n        // Preload from JSON, if present\n        try {\n            const raw = (getTextArea()).value;\n            if (raw && raw.trim()) {\n                const parsed = JSON.parse(raw);\n                const g = Array.isArray(parsed.groups) ? parsed.groups[0] : null;\n                if (g) {\n                    (veBody.querySelector('.ve-mode') as HTMLSelectElement).value = g.mode || 'any';\n                    const acts = new Set((g.actions || []) as string[]);\n                    veBody.querySelectorAll('.ve-act').forEach((i: any) => { i.checked = acts.has(i.value); });\n                    (g.rules || []).forEach((r: any) => row(r.field, r.op, r.value));\n                }\n            }\n        } catch { /* ignore */ }\n\n        // mount entire VE block\n        htmlParent.prepend(ve);\n    }\n\n\n    function onOpenFieldEdit(editPanel: HTMLElement) {\n        const logicControls = Array.from(\n            editPanel.querySelectorAll('[name=\"logic\"], [name=\"logicApplyTo\"], [name=\"logicGroup\"]')\n        ) as HTMLElement[];\n        if (!logicControls.length) return;\n\n        // Ensure the outer Conditional Logic section exists\n        let section = editPanel.querySelector('.fb-logic-section') as HTMLElement | null;\n        if (!section) {\n            section = document.createElement('div');\n            section.className = 'fb-logic-section';\n            section.innerHTML = `\n        <div class=\"fb-logic-header\" style=\"margin-top:8px; font-weight:600; cursor:pointer;\">\n          ${panelTitle}\n          <span style=\"font-weight:400; font-size:12px; opacity:.7\"> (toggle)</span>\n        </div>\n        <div class=\"fb-logic-body\" style=\"border:1px solid #e5e7eb; padding:8px; margin-top:6px; display:none;\"></div>\n      `;\n            editPanel.appendChild(section);\n\n            const header = section.querySelector('.fb-logic-header') as HTMLElement;\n            const body = section.querySelector('.fb-logic-body') as HTMLElement;\n            header.addEventListener('click', () => {\n                const open = body.style.display !== 'none';\n                body.style.display = open ? 'none' : '';\n            });\n        }\n\n        const body = section!.querySelector('.fb-logic-body') as HTMLElement;\n\n        // ---------- Visual Rules Editor (top, only mount once) ----------\n        if (enableVE) {\n            const getTextArea = () => body.querySelector('[name=\"logic\"]') as HTMLTextAreaElement;\n            const getApplyTo = () => body.querySelector('[name=\"logicApplyTo\"]') as HTMLSelectElement;\n            const getGroupId = () => body.querySelector('[name=\"logicGroup\"]') as HTMLInputElement;\n\n            // Guard: only one VE\n            if (!body.querySelector('.fb-logic-ve')) {\n                // Clean any legacy dupes (just in case)\n                const dupes = body.querySelectorAll('.fb-logic-ve');\n                if (dupes.length > 1) dupes.forEach((el, idx) => { if (idx > 0) el.remove(); });\n\n                makeVE(body, getTextArea, getApplyTo, getGroupId);\n            }\n        }\n\n        // ---------- Advanced (JSON) panel (wrapped + collapsed by default) ----------\n        // Build the advanced container if needed\n        let adv = body.querySelector('.fb-logic-advanced') as HTMLElement | null;\n        if (!adv) {\n            adv = document.createElement('div');\n            adv.className = 'fb-logic-advanced';\n            adv.innerHTML = `\n        <div class=\"fb-logic-adv-header\" style=\"margin-top:10px; font-weight:600; cursor:pointer;\">\n          Advanced (JSON)\n          <span style=\"font-weight:400; font-size:12px; opacity:.7\"> (toggle)</span>\n        </div>\n        <div class=\"fb-logic-adv-body\" style=\"\n          border:1px dashed #cbd5e1;\n          padding:8px;\n          margin-top:6px;\n          display:none; /* collapsed by default */\n        \"></div>\n      `;\n            body.appendChild(adv);\n\n            const advHeader = adv.querySelector('.fb-logic-adv-header') as HTMLElement;\n            const advBody = adv.querySelector('.fb-logic-adv-body') as HTMLElement;\n            advHeader.addEventListener('click', () => {\n                const open = advBody.style.display !== 'none';\n                advBody.style.display = open ? 'none' : '';\n            });\n        }\n\n        // Move the original controls into the Advanced box content\n        const advBody = adv!.querySelector('.fb-logic-adv-body') as HTMLElement;\n        logicControls.forEach(el => {\n            const row = el.closest('.form-group') || el.closest('div') || el;\n            if (row && row.parentElement !== advBody) advBody.appendChild(row as HTMLElement);\n        });\n\n        // Guard: if somehow controls were duplicated by upstream UI reflows, keep one\n        const seen = new Set<string>();\n        advBody.querySelectorAll<HTMLElement>('[name=\"logic\"], [name=\"logicApplyTo\"], [name=\"logicGroup\"]').forEach(ctrl => {\n            const n = ctrl.getAttribute('name')!;\n            if (seen.has(n)) {\n                const dupRow = ctrl.closest('.form-group') || ctrl.closest('div') || ctrl;\n                if (dupRow && dupRow.parentElement === advBody) (dupRow as HTMLElement).remove();\n            } else {\n                seen.add(n);\n            }\n        });\n    }\n\n\n    return { typeUserAttrs, onOpenFieldEdit };\n}\n\n/**\n * Form-level groups JSON manager (as before)\n */\nexport function attachLogicGroupsManager(\n    targetContainer: HTMLElement,\n    initialOrOpts?: string | {\n        initialJson?: string;\n        getAvailableFields?: () => FieldMeta[];\n        getFieldValues?: (fieldName: string) => Array<{ label: string; value: string }> | null;\n    }\n) {\n    const opts = (typeof initialOrOpts === 'string')\n        ? { initialJson: initialOrOpts }\n        : (initialOrOpts || {});\n\n    const state = {\n        json: opts.initialJson || '',\n    };\n\n    // Helpers to obtain fields/values (mirror the per-field hooks)\n    function inferFieldsFromBuilderJson(): FieldMeta[] {\n        try {\n            const stage = (window as any).jQuery?.('.build-wrap');\n            const inst = stage?.data?.('formBuilder');\n            const json = inst?.actions?.getData?.('json');\n            const arr = typeof json === 'string' ? JSON.parse(json) : Array.isArray(json) ? json : [];\n            return arr.filter((f: any) => f?.name).map((f: any) => ({\n                name: f.name, type: f.type, label: f.label,\n                values: Array.isArray(f.values) ? f.values.map((v: any) => ({ label: v.label ?? v.value, value: v.value })) : undefined\n            }));\n        } catch { return []; }\n    }\n\n    function getFields(): FieldMeta[] {\n        try { const custom = opts.getAvailableFields?.(); if (custom && custom.length) return custom; } catch { }\n        return inferFieldsFromBuilderJson();\n    }\n\n    function getValuesFor(fieldName: string): Array<{ label: string; value: string }> | null {\n        try { const custom = opts.getFieldValues?.(fieldName); if (custom) return custom; } catch { }\n        const fm = getFields().find(f => f.name === fieldName);\n        return fm?.values ?? null;\n    }\n\n    // ----- UI scaffold (button + modal) -----\n    const wrapper = document.createElement('div');\n    wrapper.style.margin = '8px 0';\n    wrapper.innerHTML = `\n    <button type=\"button\" class=\"btn btn-sm btn-outline-primary\">Logic Groups</button>\n    <div class=\"fb-logic-modal\" style=\"display:none; position:fixed; inset:0; background:rgba(0,0,0,.4); z-index:99999;\">\n      <div style=\"background:#fff; max-width:900px; width:92%; margin:4% auto; padding:16px; border-radius:8px;\">\n        <div style=\"display:flex; justify-content:space-between; align-items:center; gap:8px; margin-bottom:8px;\">\n          <strong style=\"font-size:16px;\">Logic Groups</strong>\n          <div style=\"display:flex; gap:8px;\">\n            <button type=\"button\" class=\"btn btn-sm btn-secondary fb-groups-load-sample\">Load sample</button>\n            <button type=\"button\" class=\"btn btn-sm btn-outline-secondary fb-groups-from-json\">From JSON</button>\n            <button type=\"button\" class=\"btn btn-sm btn-primary fb-groups-save\">Save</button>\n            <button type=\"button\" class=\"btn btn-sm btn-light fb-logic-close\">Close</button>\n          </div>\n        </div>\n\n        <!-- Visual Editor header outside border -->\n        <div class=\"fb-groups-ve-header\" style=\"font-weight:600;\">Visual Groups Editor\n          <span style=\"font-size:12px;opacity:.7;font-weight:400;\">(no JSON typing)</span>\n        </div>\n        <div class=\"fb-groups-ve-body\" style=\"border:1px dashed #cbd5e1; padding:8px; margin-top:6px;\">\n          <div class=\"fb-groups-list\"></div>\n          <button type=\"button\" class=\"btn btn-sm btn-outline-primary fb-groups-add\" style=\"margin-top:8px;\">Add group</button>\n        </div>\n\n        <!-- Advanced (collapsed by default) -->\n        <div class=\"fb-groups-adv\" style=\"margin-top:10px;\">\n          <div class=\"fb-groups-adv-header\" style=\"font-weight:600; cursor:pointer;\">\n            Advanced (JSON)\n            <span style=\"font-size:12px;opacity:.7;font-weight:400;\">(toggle)</span>\n          </div>\n          <div class=\"fb-groups-adv-body\" style=\"border:1px dashed #cbd5e1; padding:8px; margin-top:6px; display:none;\">\n            <p style=\"font-size:12px; margin: 0 0 6px 0; opacity:.75;\">\n              Define reusable groups keyed by ID. Example:\n            </p>\n            <pre style=\"background:#f8fafc; padding:6px; border-radius:6px; font-size:12px; margin-top:0;\">{\n  \"vehicleDetails\": {\n    \"mode\": \"any\",\n    \"rules\": [{ \"field\": \"hasVehicle\", \"op\": \"equals\", \"value\": \"yes\" }],\n    \"actions\": [\"show\", \"require\"]\n  }\n}</pre>\n            <textarea class=\"fb-logic-json\" style=\"width:100%; height:240px; font-family:monospace;\"></textarea>\n          </div>\n        </div>\n      </div>\n    </div>\n  `;\n    targetContainer.prepend(wrapper);\n\n    const btn = wrapper.querySelector('button') as HTMLButtonElement;\n    const modal = wrapper.querySelector('.fb-logic-modal') as HTMLDivElement;\n    const closeBtn = modal.querySelector('.fb-logic-close') as HTMLButtonElement;\n    const loadBtn = modal.querySelector('.fb-groups-load-sample') as HTMLButtonElement;\n    const saveBtn = modal.querySelector('.fb-groups-save') as HTMLButtonElement;\n    const fromJson = modal.querySelector('.fb-groups-from-json') as HTMLButtonElement;\n    const advHdr = modal.querySelector('.fb-groups-adv-header') as HTMLDivElement;\n    const advBody = modal.querySelector('.fb-groups-adv-body') as HTMLDivElement;\n    const ta = modal.querySelector('.fb-logic-json') as HTMLTextAreaElement;\n\n    const listEl = modal.querySelector('.fb-groups-list') as HTMLDivElement;\n    const addBtn = modal.querySelector('.fb-groups-add') as HTMLButtonElement;\n\n    const open = () => {\n        // Initial source: window.fbLogicGroups → state.json → textarea → VE\n        const srcObj = (window as any).fbLogicGroups && typeof (window as any).fbLogicGroups === 'object'\n            ? (window as any).fbLogicGroups\n            : (state.json ? safeParse(state.json) : {});\n        state.json = JSON.stringify(srcObj || {}, null, 2);\n        ta.value = state.json;\n        // Rebuild VE from current JSON\n        renderFromJson(srcObj || {});\n        modal.style.display = 'block';\n    };\n    const close = () => { modal.style.display = 'none'; };\n\n    btn.addEventListener('click', open);\n    closeBtn.addEventListener('click', close);\n    modal.addEventListener('click', (e) => { if (e.target === modal) close(); });\n\n    advHdr.addEventListener('click', () => {\n        const open = advBody.style.display !== 'none';\n        advBody.style.display = open ? 'none' : '';\n    });\n\n    loadBtn.addEventListener('click', () => {\n        const sample = {\n            vehicleDetails: {\n                mode: 'any',\n                rules: [{ field: 'hasVehicle', op: 'equals', value: 'yes' }],\n                actions: ['show', 'require']\n            }\n        };\n        ta.value = JSON.stringify(sample, null, 2);\n        renderFromJson(sample);\n    });\n\n    fromJson.addEventListener('click', () => {\n        const parsed = safeParse(ta.value) || {};\n        renderFromJson(parsed);\n    });\n\n    saveBtn.addEventListener('click', () => {\n        const obj = collectFromVe();\n        state.json = JSON.stringify(obj, null, 2);\n        ta.value = state.json;\n        (window as any).fbLogicGroups = obj;\n        alert('Logic groups saved (visual & JSON). Available as window.fbLogicGroups.');\n        close();\n    });\n\n    addBtn.addEventListener('click', () => addGroupBlock());\n\n    // ---- VE rendering helpers ----\n    function safeParse(txt: string): any | null {\n        try { return JSON.parse(txt); } catch { return null; }\n    }\n\n    function clearChildren(node: HTMLElement) {\n        while (node.firstChild) node.removeChild(node.firstChild);\n    }\n\n    function addGroupBlock(groupId: string = '') {\n        const groupWrap = document.createElement('div');\n        groupWrap.className = 'fb-group-block';\n        groupWrap.style.border = '1px solid #e5e7eb';\n        groupWrap.style.borderRadius = '6px';\n        groupWrap.style.padding = '8px';\n        groupWrap.style.marginTop = '8px';\n\n        // Header: Group ID outside inner body\n        const header = document.createElement('div');\n        header.style.display = 'grid';\n        header.style.gridTemplateColumns = '1fr auto';\n        header.style.gap = '8px';\n        header.style.alignItems = 'center';\n\n        const idInput = document.createElement('input');\n        idInput.className = 'form-control form-control-sm fb-group-id';\n        idInput.placeholder = 'Group ID (e.g., vehicleDetails)';\n        idInput.value = groupId;\n\n        const delBtn = document.createElement('button');\n        delBtn.type = 'button';\n        delBtn.className = 'btn btn-sm btn-link text-danger';\n        delBtn.textContent = 'remove group';\n        delBtn.addEventListener('click', () => groupWrap.remove());\n\n        header.appendChild(idInput);\n        header.appendChild(delBtn);\n        groupWrap.appendChild(header);\n\n        // Body: dashed box like VE/Advanced bodies\n        const body = document.createElement('div');\n        body.style.border = '1px dashed #cbd5e1';\n        body.style.padding = '8px';\n        body.style.marginTop = '6px';\n        groupWrap.appendChild(body);\n\n        // Mode + Actions\n        const top = document.createElement('div');\n        top.style.display = 'flex';\n        top.style.flexWrap = 'wrap';\n        top.style.gap = '12px';\n        top.style.alignItems = 'center';\n        top.style.marginBottom = '6px';\n\n        const modeLbl = document.createElement('label');\n        modeLbl.textContent = 'Mode';\n        const modeSel = document.createElement('select');\n        modeSel.className = 'form-select form-select-sm fb-group-mode';\n        ['any', 'all'].forEach(v => {\n            const opt = document.createElement('option');\n            opt.value = v; opt.textContent = v.toUpperCase() + (v === 'any' ? ' (OR)' : ' (AND)');\n            modeSel.appendChild(opt);\n        });\n\n        const actionsWrap = document.createElement('div');\n        actionsWrap.innerHTML = `\n      <label style=\"margin-right:8px;\">Actions</label>\n      <label class=\"form-check form-check-inline\"><input class=\"form-check-input fb-act\" type=\"checkbox\" value=\"show\" checked> <span class=\"form-check-label\">show</span></label>\n      <label class=\"form-check form-check-inline\"><input class=\"form-check-input fb-act\" type=\"checkbox\" value=\"require\"> <span class=\"form-check-label\">require</span></label>\n      <label class=\"form-check form-check-inline\"><input class=\"form-check-input fb-act\" type=\"checkbox\" value=\"enable\"> <span class=\"form-check-label\">enable</span></label>\n      <label class=\"form-check form-check-inline\"><input class=\"form-check-input fb-act\" type=\"checkbox\" value=\"disable\"> <span class=\"form-check-label\">disable</span></label>\n      <label class=\"form-check form-check-inline\"><input class=\"form-check-input fb-act\" type=\"checkbox\" value=\"hide\"> <span class=\"form-check-label\">hide</span></label>\n    `;\n\n        const topLeft = document.createElement('div');\n        topLeft.appendChild(modeLbl);\n        topLeft.appendChild(document.createTextNode(' '));\n        topLeft.appendChild(modeSel);\n\n        top.appendChild(topLeft);\n        top.appendChild(actionsWrap);\n        body.appendChild(top);\n\n        // Rules list\n        const rulesList = document.createElement('div');\n        rulesList.className = 'fb-group-rules';\n        body.appendChild(rulesList);\n\n        const addRuleBtn = document.createElement('button');\n        addRuleBtn.type = 'button';\n        addRuleBtn.className = 'btn btn-sm btn-outline-primary';\n        addRuleBtn.textContent = 'Add rule';\n        addRuleBtn.style.marginTop = '8px';\n        body.appendChild(addRuleBtn);\n\n        function addRuleRow(field?: string, op?: string, value?: string) {\n            const row = document.createElement('div');\n            row.className = 'fb-group-rule';\n            row.style.display = 'grid';\n            row.style.gridTemplateColumns = '1fr 1fr 1fr auto';\n            row.style.gap = '6px';\n            row.style.marginTop = '6px';\n\n            // Field select\n            const fSel = document.createElement('select');\n            fSel.className = 'form-select form-select-sm fb-rule-field';\n            getFields().forEach(f => {\n                const opt = document.createElement('option');\n                opt.value = f.name;\n                opt.textContent = f.label ? `${f.label} (${f.name})` : f.name;\n                fSel.appendChild(opt);\n            });\n            if (field) fSel.value = field;\n\n            // Operator\n            const oSel = document.createElement('select');\n            oSel.className = 'form-select form-select-sm fb-rule-op';\n\n            function setOpsForField(fn: string) {\n                const fm = getFields().find(f => f.name === fn);\n                const isNum = fm?.type === 'number';\n                const isChoice = fm?.type === 'radio-group' || fm?.type === 'select' || !!fm?.values?.length;\n                const ops = isNum\n                    ? ['equals', 'notEquals', 'gt', 'gte', 'lt', 'lte', 'isEmpty', 'notEmpty']\n                    : isChoice\n                        ? ['equals', 'notEquals', 'isEmpty', 'notEmpty']\n                        : ['equals', 'notEquals', 'contains', 'startsWith', 'endsWith', 'isEmpty', 'notEmpty'];\n                oSel.innerHTML = '';\n                ops.forEach(o => {\n                    const opt = document.createElement('option');\n                    opt.value = o; opt.textContent = o;\n                    oSel.appendChild(opt);\n                });\n            }\n\n            setOpsForField(fSel.value);\n            if (op) oSel.value = op;\n\n            // Value control\n            const vWrap = document.createElement('div');\n            vWrap.className = 'fb-rule-value-wrap';\n\n            function renderValueControl(fn: string, current?: string) {\n                vWrap.innerHTML = '';\n                const choices = getValuesFor(fn);\n                if (choices && choices.length) {\n                    const s = document.createElement('select');\n                    s.className = 'form-select form-select-sm fb-rule-value';\n                    choices.forEach(c => {\n                        const option = document.createElement('option');\n                        option.value = c.value;\n                        option.textContent = c.label ?? c.value;\n                        s.appendChild(option);\n                    });\n                    if (current) s.value = current;\n                    vWrap.appendChild(s);\n                } else {\n                    const i = document.createElement('input');\n                    i.type = 'text';\n                    i.className = 'form-control form-control-sm fb-rule-value';\n                    if (current) i.value = current;\n                    vWrap.appendChild(i);\n                }\n            }\n\n            renderValueControl(fSel.value, value);\n\n            // Remove rule\n            const rm = document.createElement('button');\n            rm.type = 'button';\n            rm.className = 'btn btn-sm btn-link text-danger';\n            rm.textContent = 'remove';\n            rm.addEventListener('click', () => row.remove());\n\n            // interactions\n            fSel.addEventListener('change', () => {\n                setOpsForField(fSel.value);\n                renderValueControl(fSel.value);\n            });\n\n            // mount\n            row.appendChild(fSel);\n            row.appendChild(oSel);\n            row.appendChild(vWrap);\n            row.appendChild(rm);\n            rulesList.appendChild(row);\n        }\n\n        addRuleBtn.addEventListener('click', () => addRuleRow());\n\n        // Expose a tiny API to preset values\n        (groupWrap as any)._set = (cfg: { mode?: string; actions?: string[]; rules?: any[] }) => {\n            if (cfg?.mode) (modeSel.value = cfg.mode);\n            const acts = new Set(cfg?.actions || []);\n            (actionsWrap.querySelectorAll('.fb-act') as NodeListOf<HTMLInputElement>).forEach(i => { i.checked = acts.has(i.value); });\n            clearChildren(rulesList);\n            (cfg?.rules || []).forEach((r: any) => addRuleRow(r.field, r.op, r.value));\n        };\n\n        listEl.appendChild(groupWrap);\n        return groupWrap;\n    }\n\n    function renderFromJson(obj: Record<string, any>) {\n        clearChildren(listEl);\n        const keys = Object.keys(obj || {});\n        if (!keys.length) {\n            // Start with one blank group\n            addGroupBlock();\n            return;\n        }\n        keys.forEach(k => {\n            const g = obj[k] || {};\n            const block = addGroupBlock(k);\n            (block as any)._set({ mode: g.mode || 'any', actions: g.actions || [], rules: g.rules || [] });\n        });\n    }\n\n    function collectFromVe(): Record<string, any> {\n        const result: Record<string, any> = {};\n        const blocks = Array.from(listEl.querySelectorAll('.fb-group-block'));\n        blocks.forEach(b => {\n            const id = (b.querySelector('.fb-group-id') as HTMLInputElement).value.trim();\n            if (!id) return; // skip unnamed\n            const mode = (b.querySelector('.fb-group-mode') as HTMLSelectElement).value as 'any' | 'all';\n            const actions = Array.from(b.querySelectorAll('.fb-act') as NodeListOf<HTMLInputElement>)\n                .filter(i => i.checked).map(i => i.value);\n            const rules: any[] = [];\n            b.querySelectorAll('.fb-group-rule').forEach(r => {\n                const field = (r.querySelector('.fb-rule-field') as HTMLSelectElement)?.value;\n                const op = (r.querySelector('.fb-rule-op') as HTMLSelectElement)?.value;\n                const valEl = (r.querySelector('.fb-rule-value') as HTMLInputElement | HTMLSelectElement);\n                const value = (valEl as any)?.value ?? '';\n                if (field && op) rules.push({ field, op, value });\n            });\n            result[id] = { mode, rules, actions };\n        });\n        return result;\n    }\n\n    return {\n        getJson: () => state.json,\n        setJson: (j: string) => { state.json = j; },\n        getGroups: () => safeParse(state.json || '{}') || {},\n    };\n}\n\n","import type { LogicConfig, LogicGroup, Rule, SetupOptions } from '../types';\n\ndeclare global {\n    interface Window {\n        fbLogicGroups?: Record<string, LogicGroup>;\n        __FB_LOGIC_DEBUG__?: boolean;\n        FB_GET_WRAPPER?: (el: HTMLElement) => HTMLElement;\n        _fbLogic?: { refresh: () => void }; // debug handle\n    }\n}\n\n/* ==============================\n   Utilities\n============================== */\n\nfunction cssEscape(name: string) {\n    const CSSObj: any = (window as any).CSS;\n    if (CSSObj && typeof CSSObj.escape === 'function') return CSSObj.escape(name);\n    return name.replace(/([^a-zA-Z0-9_-])/g, '\\\\$1');\n}\n\nfunction sourceSelector(fieldName: string) {\n    const n = cssEscape(fieldName);\n    return `[name=\"${n}\"], [name=\"${n}[]\"], [data-fb-name=\"${n}\"]`;\n}\n\nfunction defaultWrapper(el: HTMLElement): HTMLElement {\n    const candidates = ['.form-group', '.fb-field-wrapper', '.form-field', '.field-wrapper', '.row', '.mb-3', '.box'];\n    for (const c of candidates) {\n        const found = el.closest(c);\n        if (found) return found as HTMLElement;\n    }\n    return el.parentElement || el;\n}\n\nfunction getControlValue(el: HTMLElement): any {\n    if (el instanceof HTMLInputElement) {\n        if (el.type === 'radio') {\n            const name = el.name;\n            const group =\n                el.form?.querySelectorAll(`input[type=\"radio\"][name=\"${name}\"]`) ||\n                document.querySelectorAll(`input[type=\"radio\"][name=\"${name}\"]`);\n            for (const r of Array.from(group)) {\n                const rr = r as HTMLInputElement;\n                if (rr.checked) return rr.value;\n            }\n            return null;\n        }\n        if (el.type === 'checkbox') {\n            const name = el.name;\n            const group =\n                el.form?.querySelectorAll(`input[type=\"checkbox\"][name=\"${name}\"]`) ||\n                document.querySelectorAll(`input[type=\"checkbox\"][name=\"${name}\"]`);\n            const vals: string[] = [];\n            Array.from(group).forEach((cb) => {\n                const cbb = cb as HTMLInputElement;\n                if (cbb.checked) vals.push(cbb.value);\n            });\n            return vals;\n        }\n        return el.value;\n    }\n    if (el instanceof HTMLSelectElement) {\n        if (el.multiple) return Array.from(el.selectedOptions).map((o) => o.value);\n        return el.value;\n    }\n    if (el instanceof HTMLTextAreaElement) return el.value;\n    return (el as any).value ?? (el as any).textContent ?? null;\n}\n\nfunction testRule(value: any, rule: Rule): boolean {\n    const op = rule.op;\n    const expected = rule.value;\n\n    if (Array.isArray(value)) {\n        if (op === 'contains') return value.includes(expected);\n        if (op === 'equals') return value.includes(expected);\n        if (op === 'notEquals') return !value.includes(expected);\n        if (op === 'isEmpty') return value.length === 0;\n        if (op === 'notEmpty') return value.length > 0;\n        return false;\n    }\n\n    const valStr = value == null ? '' : String(value);\n    const expStr = expected == null ? '' : String(expected);\n    const valNum = Number(value);\n    const expNum = Number(expected);\n\n    switch (op) {\n        case 'equals': return value == expected;\n        case 'notEquals': return value != expected;\n        case 'contains': return valStr.includes(expStr);\n        case 'startsWith': return valStr.startsWith(expStr);\n        case 'endsWith': return valStr.endsWith(expStr);\n        case 'gt': return valNum > expNum;\n        case 'gte': return valNum >= expNum;\n        case 'lt': return valNum < expNum;\n        case 'lte': return valNum <= expNum;\n        case 'isEmpty': return valStr.trim() === '';\n        case 'notEmpty': return valStr.trim() !== '';\n        default: return false;\n    }\n}\n\nfunction evalGroup(form: HTMLElement, group: LogicGroup): boolean {\n    const results = group.rules.map((rule) => {\n        const src = form.querySelector(sourceSelector(rule.field)) as HTMLElement | null;\n        if (!src) return false;\n        const v = getControlValue(src);\n        return testRule(v, rule);\n    });\n    const ok = group.mode === 'all' ? results.every(Boolean) : results.some(Boolean);\n    if (window.__FB_LOGIC_DEBUG__) console.log('[fb-logic] group', group, 'results', results, 'ok?', ok);\n    return ok;\n}\n\nfunction setDisabled(el: HTMLElement, disabled: boolean) {\n    const inputs = el.querySelectorAll('input, select, textarea, button');\n    inputs.forEach((n: Element) => {\n        (n as HTMLInputElement).disabled = disabled;\n        if (disabled) (n as HTMLInputElement).required = false;\n    });\n}\n\nfunction setVisible(el: HTMLElement, visible: boolean) {\n    (el as HTMLElement).style.display = visible ? '' : 'none';\n    (el as HTMLElement).setAttribute('aria-hidden', visible ? 'false' : 'true');\n}\n\n/* ==============================\n   Actions + Targets\n============================== */\n\nfunction applyActions(target: HTMLElement, actions: LogicGroup['actions'], truthy: boolean) {\n    const shouldShow =\n        actions.includes('show') ? truthy :\n            actions.includes('hide') ? !truthy :\n                truthy;\n\n    setVisible(target, shouldShow);\n\n    if (actions.includes('disable')) setDisabled(target, true);\n    if (actions.includes('enable')) setDisabled(target, false);\n\n    if (actions.includes('require')) {\n        const inputs = target.querySelectorAll('input, select, textarea');\n        inputs.forEach((n: Element) => { (n as HTMLInputElement).required = shouldShow; });\n    }\n}\n\nfunction parseLogicAttr(el: HTMLElement): LogicConfig | null {\n    const raw = el.getAttribute('data-logic');\n    if (!raw) return null;\n    try { return JSON.parse(raw) as LogicConfig; }\n    catch {\n        if (window.__FB_LOGIC_DEBUG__) console.warn('Invalid data-logic JSON', raw, el);\n        return null;\n    }\n}\n\n/* ==============================\n   HYDRATION (Builder JSON → DOM)\n============================== */\n\nfunction strifyLogic(logic: any): string | null {\n    if (!logic) return null;\n    if (typeof logic === 'string') return logic;\n    try { return JSON.stringify(logic); } catch { return null; }\n}\n\nfunction queryByNameAll(form: HTMLElement, name: string): NodeListOf<HTMLElement> {\n    const n = cssEscape(name);\n    return form.querySelectorAll<HTMLElement>(`[name=\"${n}\"], [name=\"${n}[]\"]`);\n}\n\nfunction hydrateFromFormData(form: HTMLElement, formData: any) {\n    if (!formData) return;\n    try { if (typeof formData === 'string') formData = JSON.parse(formData); } catch { return; }\n    if (!Array.isArray(formData)) return;\n\n    for (const field of formData) {\n        const name: string | undefined = field?.name;\n        if (!name) continue;\n\n        const nodes = queryByNameAll(form, name);\n        if (!nodes.length) continue;\n\n        const logicJson = strifyLogic(field.logic);\n        const applyTo: string = field.logicApplyTo || field.applyTo || 'self';\n        const groupId: string | undefined = field.logicGroup;\n\n        if (!logicJson && groupId && applyTo === 'group') {\n            nodes.forEach((el) => el.setAttribute('data-logic-group', String(groupId)));\n            continue;\n        }\n\n        if (!logicJson) continue;\n\n        if (applyTo === 'container') {\n            nodes.forEach((el) => {\n                const wrap =\n                    typeof window.FB_GET_WRAPPER === 'function'\n                        ? window.FB_GET_WRAPPER(el)\n                        : defaultWrapper(el);\n                wrap.setAttribute('data-logic-container', logicJson);\n            });\n        } else if (applyTo === 'group' && groupId) {\n            nodes.forEach((el) => el.setAttribute('data-logic-group', String(groupId)));\n        } else {\n            nodes.forEach((el) => el.setAttribute('data-logic', logicJson));\n        }\n    }\n}\n\nfunction normalizeActions(cfg: LogicConfig): LogicGroup['actions'] {\n    const a = (cfg.actions && cfg.actions.length ? cfg.actions : ['show']);\n    return a as LogicGroup['actions'];\n}\n\n/* ==============================\n   Target discovery + evaluation\n============================== */\n\nfunction findTargets(form: HTMLElement): Array<{\n    el: HTMLElement;\n    cfg: LogicConfig;\n    mode: 'self' | 'container' | 'group';\n    groupId?: string;\n}> {\n    const targets: Array<{\n        el: HTMLElement;\n        cfg: LogicConfig;\n        mode: 'self' | 'container' | 'group';\n        groupId?: string;\n    }> = [];\n\n    form.querySelectorAll('[data-logic]').forEach((el) => {\n        const cfg = parseLogicAttr(el as HTMLElement);\n        if (cfg) targets.push({ el: el as HTMLElement, cfg, mode: 'self' });\n    });\n\n    form.querySelectorAll('[data-logic-container]').forEach((el) => {\n        const raw = (el as HTMLElement).getAttribute('data-logic-container');\n        if (!raw) return;\n        try { targets.push({ el: el as HTMLElement, cfg: JSON.parse(raw) as LogicConfig, mode: 'container' }); }\n        catch { }\n    });\n\n    form.querySelectorAll('[data-logic-group]').forEach((el) => {\n        const id = (el as HTMLElement).getAttribute('data-logic-group') || '';\n        const group = window.fbLogicGroups?.[id];\n        if (group) {\n            const cfg: LogicConfig = { groups: [group], actions: group.actions, applyTo: 'group', logicGroup: id };\n            targets.push({ el: el as HTMLElement, cfg, mode: 'group', groupId: id });\n        }\n    });\n\n    if (window.__FB_LOGIC_DEBUG__) {\n        console.log('[fb-logic] targets found:', targets.length, targets);\n    }\n    return targets;\n}\n\nfunction reeval(form: HTMLElement, targets: ReturnType<typeof findTargets>, options: SetupOptions) {\n    const getWrapper = options.getWrapper || defaultWrapper;\n\n    targets.forEach((t) => {\n        const el = t.el;\n\n        let truthy = true;\n        if (t.cfg.groups && t.cfg.groups.length) truthy = t.cfg.groups.every((g) => evalGroup(form, g));\n\n        const wrapper =\n            t.mode === 'self' ? getWrapper(el) :\n                t.mode === 'container' ? el :\n                    getWrapper(el);\n\n        const actions = normalizeActions(t.cfg);\n        applyActions(wrapper, actions, truthy);\n\n        if (options.onState) options.onState(el, truthy);\n        if (window.__FB_LOGIC_DEBUG__) console.log('[fb-logic] applied', { el, mode: t.mode, actions, truthy, wrapper });\n    });\n}\n\n/* ==============================\n   Public API\n============================== */\n\nexport function setup(formEl: HTMLElement | Element, _formData?: any, options: SetupOptions = {}) {\n    const form = formEl as HTMLElement;\n\n    if (_formData) {\n        try { hydrateFromFormData(form, _formData); }\n        catch (e) { if (window.__FB_LOGIC_DEBUG__) console.warn('hydrateFromFormData failed', e); }\n    }\n\n    const targets = findTargets(form);\n\n    const watched = new Set<string>();\n    targets.forEach((t) => { t.cfg.groups?.forEach((g) => g.rules.forEach((r) => watched.add(r.field))); });\n    if (window.__FB_LOGIC_DEBUG__) console.log('[fb-logic] watching fields:', Array.from(watched));\n\n    const handler = (ev: Event) => {\n        const nameAttr = (ev.target as HTMLInputElement)?.name;\n        if (!nameAttr) return;\n        const simple = nameAttr.replace(/\\[\\]$/, '');\n        if (watched.has(nameAttr) || watched.has(simple)) {\n            if (window.__FB_LOGIC_DEBUG__) console.log('[fb-logic] change on', nameAttr, '→ reeval');\n            reeval(form, targets, options);\n        }\n    };\n\n    form.addEventListener('input', handler, true);\n    form.addEventListener('change', handler, true);\n\n    reeval(form, targets, options);\n\n    form.addEventListener('fb:reinit-logic' as any, () => reeval(form, targets, options));\n\n    const api = {\n        refresh: () => reeval(form, targets, options),\n        destroy: () => {\n            form.removeEventListener('input', handler, true);\n            form.removeEventListener('change', handler, true);\n        },\n    };\n    // expose for quick debugging from console\n    (window as any)._fbLogic = api;\n    return api;\n}\n\nexport function refresh(formEl: HTMLElement | Element) {\n    setup(formEl);\n}\n\nexport function evaluateField(formEl: HTMLElement | Element, _name: string) {\n    setup(formEl);\n}\n"],"names":["DEFAULT_TYPES","withConditionalLogic","opts","panelTitle","types","enableVE","typeUserAttrs","t","inferFieldsFromBuilderJson","stage","_a","inst","json","_c","_b","f","v","getFields","custom","getValuesFor","fieldName","fm","makeVE","htmlParent","getTextArea","getApplyTo","getGroupId","ve","hdr","veBody","modeWrap","actionsWrap","rules","addBtn","row","field","op","value","fSel","opt","oSel","setOpsForField","fn","isNum","isChoice","ops","o","vWrap","renderValueControl","current","choices","s","c","option","i","rm","save","_mode","_actions","r","cfg","raw","parsed","g","acts","onOpenFieldEdit","editPanel","logicControls","section","header","body","open","dupes","el","idx","adv","advHeader","advBody","seen","ctrl","n","dupRow","attachLogicGroupsManager","targetContainer","initialOrOpts","state","_d","wrapper","btn","modal","closeBtn","loadBtn","saveBtn","fromJson","advHdr","ta","listEl","srcObj","safeParse","renderFromJson","close","e","sample","obj","collectFromVe","addGroupBlock","txt","clearChildren","node","groupId","groupWrap","idInput","delBtn","top","modeLbl","modeSel","topLeft","rulesList","addRuleBtn","addRuleRow","keys","k","result","b","id","mode","actions","valEl","j","cssEscape","name","CSSObj","sourceSelector","defaultWrapper","candidates","found","getControlValue","group","rr","vals","cb","cbb","testRule","rule","expected","valStr","expStr","valNum","expNum","evalGroup","form","results","src","ok","setDisabled","disabled","setVisible","visible","applyActions","target","truthy","shouldShow","parseLogicAttr","strifyLogic","logic","queryByNameAll","hydrateFromFormData","formData","nodes","logicJson","applyTo","normalizeActions","findTargets","targets","reeval","options","getWrapper","setup","formEl","_formData","watched","handler","ev","nameAttr","simple","api","refresh","evaluateField","_name"],"mappings":"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"}